window.S24_OSA=window.S24_OSA||{},window.S24_OSA.apsConfig=window.S24_OSA.apsConfig||[{slotName:"/4467/IS24_DE/expose/sky_right",sizes:[[300,600],[160,600]]},{slotName:"/4467/IS24_DE/expose/banner_top",sizes:[[970,250],[728,90]]},{slotName:"/4467/IS24_DE/expose/banner_content_1",sizes:[[300,250],[728,90]]},{slotName:"/4467/IS24_DE/expose/banner_right_1",sizes:[[300,250]]},{slotName:"/4467/IS24_DE/expose/banner_right_2",sizes:[[300,600],[160,600]]}],function r(s,a,d){function u(t,e){if(!a[t]){if(!s[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(l)return l(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=a[t]={exports:{}};s[t][0].call(o.exports,function(e){return u(s[t][1][e]||e)},o,o.exports,r,s,a,d)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<d.length;e++)u(d[e]);return u}({1:[function(e,t,i){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],2:[function(e,t,i){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},{}],3:[function(e,t,i){function n(){return t.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},n.apply(this,arguments)}t.exports=n},{}],4:[function(e,t,i){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],5:[function(e,t,i){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.apsMiddleware=void 0;var r=n(e("@babel/runtime/helpers/extends")),o=n(e("./aps-used-bids-tracker")),s=e("./aps-util"),a={middlewareId:"apsMiddleware",initialPromise:null,initialBidsRequested:!1,usedBidsTracker:new o.default,slotNameToSlotIdMapping:{},onMiddlewareRegistered:function(){d()||((0,s.loadAmazonScriptAndCreateStub)(),window.apstag.init({pubID:"3620",adServer:"googletag"}),h("Init APS"))},onAdSlotCreated:function(e){d()||(g(e),a.initialBidsRequested||l())},onGptAdSlotDestroyed:function(e){d()||S(e)},onAdSlotsRefreshing:function(t){if(d())return Promise.resolve();if(a.initialPromise){var e=a.initialPromise.then(function(e){return a.usedBidsTracker.markBidsAsUsed(t),e});return a.initialPromise=null,e}return a.usedBidsTracker.hasUnusedBidsForAllSlots(t)?(h("APS: Using existing bids instead of rebidding.",a.usedBidsTracker.adUnitPathsWithUnusedBids),a.usedBidsTracker.markBidsAsUsed(t),Promise.resolve(!0)):(h("APS: Rebidding.",a.usedBidsTracker.adUnitPathsWithUnusedBids),t.forEach(g),c(f(t)))}};i.apsMiddleware=a;var d=function(){return window.S24_OSA.getConfigValue&&window.S24_OSA.getConfigValue("deactivateApsMiddleware")},u=null,l=function(){u||(u=window.S24_OSA.debounce(function(){a.initialBidsRequested=!0,a.initialPromise=c(p())},50)),u()},c=function(e){return e&&0!==e.length?(h("Loading APS bids",e),new Promise(function(t){var i=window.setTimeout(function(){h("Amazon Bidder ran into hard timeout."),t([])},1200);window.apstag.fetchBids({slots:e,timeout:1e3},function(e){window.clearTimeout(i),t(e)})}).then(function(e){h("Got APS bids",e);var t=e.map(function(e){return window.S24_OSA.slotStore.getAdSlotByDomId(e.slotID)}).filter(function(e){return!!e});a.usedBidsTracker.saveUnusedBidsFlags(t),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){window.apstag.setDisplayBids(),h("APS targeting set")})})):(h("No APS bids to load at this point",e),Promise.resolve())},f=function(e){return p().filter(function(t){return!!e.find(function(e){return e.adUnitPath.toLowerCase()===t.slotName.toLowerCase()})})},p=function(){var o=[];return(window.S24_OSA.apsConfig||[]).forEach(function(i){var n=window.S24_OSA.adjustAdUnitPath(i.slotName);(a.slotNameToSlotIdMapping[n.toLowerCase()]||[]).forEach(function(e){var t=(0,r.default)({},i);t.slotName=n,t.slotID=e,t.slotID&&(t.sizes=w(t)),o.push(t)})}),o.filter(function(e){return!!e.slotID&&e.sizes&&0<e.sizes.length})},w=function(e){if(!e.sizes)return e.sizes;var t=window.S24_OSA.slotStore.getAdSlotByDomId(e.slotID);if(t){var i=t.eligibleAdSizesForResolution;return e.sizes.filter(function(t){return i.find(function(e){return JSON.stringify(e)===JSON.stringify(t)})})}return e.sizes},g=function(e){if(!e.isOutOfPage){var t=e.adUnitPath.toLowerCase();a.slotNameToSlotIdMapping[t]?a.slotNameToSlotIdMapping[t].push(e.container.id):a.slotNameToSlotIdMapping[t]=[e.container.id]}},S=function(t){if(!t.isOutOfPage){var e=t.adUnitPath.toLowerCase(),i=a.slotNameToSlotIdMapping[e];i&&(a.slotNameToSlotIdMapping[e]=i.filter(function(e){return e!==t.container.id}))}};function h(e,t){window.S24_OSA.logging.log({msg:e,cat:"aps",color:"#FFD208"},t)}},{"./aps-used-bids-tracker":6,"./aps-util":7,"@babel/runtime/helpers/extends":3,"@babel/runtime/helpers/interopRequireDefault":4}],6:[function(e,t,i){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),r=n(e("@babel/runtime/helpers/createClass")),s=function(){function e(){(0,o.default)(this,e),this.adUnitPathsWithUnusedBids={}}return(0,r.default)(e,[{key:"hasUnusedBidsForAllSlots",value:function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.eligibleAdSizesForResolution&&0<i.eligibleAdSizesForResolution.length&&!this.adUnitPathsWithUnusedBids[i.adUnitPath+":"+i.container.id])return!1}return!0}},{key:"markBidsAsUsed",value:function(e){var t=this;e.forEach(function(e){e.isOutOfPage||(t.adUnitPathsWithUnusedBids[e.adUnitPath+":"+e.container.id]=!1)})}},{key:"saveUnusedBidsFlags",value:function(e){var t=this;e.forEach(function(e){t.adUnitPathsWithUnusedBids[e.adUnitPath+":"+e.container.id]=!0})}},{key:"resetUnusedBids",value:function(){this.adUnitPathsWithUnusedBids={}}}]),e}();i.default=s},{"@babel/runtime/helpers/classCallCheck":1,"@babel/runtime/helpers/createClass":2,"@babel/runtime/helpers/interopRequireDefault":4}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getLocation=i.loadAmazonScriptAndCreateStub=void 0;i.loadAmazonScriptAndCreateStub=function(){!function(i,n,e,t,o,r,s){function a(e,t){n[i]._Q.push([e,t])}n[i]||(n[i]={init:function(){a("i",arguments)},fetchBids:function(){a("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(r=e.createElement("script")).async=!0,r.src="//c.amazon-adsystem.com/aax2/apstag.js",(s=e.getElementsByTagName("script")[0]).parentNode.insertBefore(r,s))}("apstag",window,document)};i.getLocation=function(){return window.location}},{}],8:[function(e,t,i){"use strict";var n=e("./aps-middleware");window.S24_OSA=window.S24_OSA||{},window.S24_OSA.cmd=window.S24_OSA.cmd||[],window.S24_OSA.cmd.push(function(){window.S24_OSA.registerMiddleware(n.apsMiddleware)})},{"./aps-middleware":5}]},{},[8]);